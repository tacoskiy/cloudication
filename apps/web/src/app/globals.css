@import "tailwindcss";

@theme {
  /* colors */
  --color-surface: #FDFFFC;
  --color-surface-muted: #F5F5F5;
  --color-invert: #011502;
  --color-brand: #17BEBB;
  --color-brand-muted: #0E7C7B;
  --color-brand-accent: #91CB3E;
  --color-alert: #E5363A;
  --color-warning: #EB8E0C;
  --color-pink: #FF4D6D;
}

@theme inline {
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

body {
  @apply bg-brand text-invert font-sans antialiased;
}

.button-white-overlay {
  @apply text-surface bg-surface/24 backdrop-blur-md;
}

.mask-cloud {
  mask-image: url('data:image/svg+xml;utf8,<svg width="300" height="230" viewBox="0 0 300 230" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M162.963 0C214.1 0 255.556 41.4551 255.556 92.5926C255.556 100.569 254.546 108.309 252.649 115.694C279.559 120.449 300 143.948 300 172.222C300 203.925 274.302 229.624 242.6 229.628L92.5926 229.63C41.4551 229.63 0 188.175 0 137.037C0 88.9343 36.6809 49.3997 83.5974 44.8767C99.7994 17.9858 129.28 0 162.963 0Z" fill="black"/></svg>');
  mask-size: contain;
  mask-repeat: no-repeat;
  mask-position: center;
  -webkit-mask-image: url('data:image/svg+xml;utf8,<svg width="300" height="230" viewBox="0 0 300 230" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M162.963 0C214.1 0 255.556 41.4551 255.556 92.5926C255.556 100.569 254.546 108.309 252.649 115.694C279.559 120.449 300 143.948 300 172.222C300 203.925 274.302 229.624 242.6 229.628L92.5926 229.63C41.4551 229.63 0 188.175 0 137.037C0 88.9343 36.6809 49.3997 83.5974 44.8767C99.7994 17.9858 129.28 0 162.963 0Z" fill="black"/></svg>');
  -webkit-mask-size: contain;
  -webkit-mask-repeat: no-repeat;
  -webkit-mask-position: center;
}

.mask-cloud-hole {
  mask-image: linear-gradient(black, black), 
              url('data:image/svg+xml;utf8,<svg width="300" height="230" viewBox="0 0 300 230" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M162.963 0C214.1 0 255.556 41.4551 255.556 92.5926C255.556 100.569 254.546 108.309 252.649 115.694C279.559 120.449 300 143.948 300 172.222C300 203.925 274.302 229.624 242.6 229.628L92.5926 229.63C41.4551 229.63 0 188.175 0 137.037C0 88.9343 36.6809 49.3997 83.5974 44.8767C99.7994 17.9858 129.28 0 162.963 0Z" fill="black"/></svg>');
  mask-size: 100% 100%, 256px 256px;
  mask-repeat: no-repeat;
  mask-position: center;
  mask-composite: exclude;
  -webkit-mask-image: linear-gradient(black, black), 
                      url('data:image/svg+xml;utf8,<svg width="300" height="230" viewBox="0 0 300 230" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M162.963 0C214.1 0 255.556 41.4551 255.556 92.5926C255.556 100.569 254.546 108.309 252.649 115.694C279.559 120.449 300 143.948 300 172.222C300 203.925 274.302 229.624 242.6 229.628L92.5926 229.63C41.4551 229.63 0 188.175 0 137.037C0 88.9343 36.6809 49.3997 83.5974 44.8767C99.7994 17.9858 129.28 0 162.963 0Z" fill="black"/></svg>');
  -webkit-mask-size: 100% 100%, 256px 256px;
  -webkit-mask-repeat: no-repeat;
  -webkit-mask-position: center;
  -webkit-mask-composite: destination-out;
}

@keyframes entryTransform {
  from {
    transform: translateY(24px) scale(0.96);
  }
  to {
    transform: translateY(0) scale(1);
  }
}

@keyframes entryOpacity {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes fadeOutDown {
  from {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
  to {
    opacity: 0;
    transform: translateY(24px) scale(0.96);
  }
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes fadeOut {
  from { opacity: 1; }
  to { opacity: 0; }
}

.animate-sheet {
  /* opacity は 0.4s で完了し、その後は forwards を指定しないことでクラス制御を優先させる */
  animation: 
    entryTransform 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards,
    entryOpacity 0.4s ease-out;
}

.animate-sheet-exit {
  animation: fadeOutDown 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

.animate-backdrop {
  animation: fadeIn 0.4s ease-out forwards;
}

.animate-backdrop-exit {
  animation: fadeOut 0.4s ease-out forwards;
}

@keyframes pulse-slow {
  0%, 100% { opacity: 0.15; }
  50% { opacity: 0.35; }
}

@keyframes marker-in {
  from {
    opacity: 0;
    transform: scale(0) rotate(-45deg);
    transform-origin: bottom;
  }
  to {
    opacity: 1;
    transform: scale(1) translateY(0) rotate(0deg);
    transform-origin: bottom;
  }
}

.animate-marker-in {
  animation: marker-in 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

.muted-shadow {
  box-shadow: 0 6px 16px var(--color-brand-muted);
}

@keyframes scatteringBurst {
  0% {
    transform: translate(calc(-50% + var(--tw-startX)), calc(-50% + var(--tw-startY))) scale(0) rotate(0deg);
    opacity: 0;
  }
  15% {
    opacity: 1;
    transform: translate(calc(-50% + var(--tw-startX) * 1.2), calc(-50% + var(--tw-startY) * 1.2)) scale(var(--tw-scale)) rotate(var(--tw-rotate));
  }
  100% {
    transform: translate(calc(-50% + var(--tw-translateX)), calc(-50% + var(--tw-translateY) + 200px)) scale(0) rotate(calc(var(--tw-rotate) * 2));
    opacity: 0;
  }
}

@keyframes ringFlare {
  0% {
    transform: translate(-50%, -50%) scale(0);
    opacity: 1;
    border-width: 24px;
    box-shadow: 0 0 0 0 rgba(255, 77, 109, 0.8);
  }
  20% {
    opacity: 1;
    box-shadow: 0 0 30px 15px rgba(255, 77, 109, 0.6);
  }
  100% {
    transform: translate(-50%, -50%) scale(8);
    opacity: 0;
    border-width: 0px;
    box-shadow: 0 0 100px 40px rgba(255, 77, 109, 0);
  }
}

@keyframes ringFlareSecondary {
  0% {
    transform: translate(-50%, -50%) scale(0);
    opacity: 0.6;
    border-width: 40px;
    border-color: var(--color-warning);
  }
  100% {
    transform: translate(-50%, -50%) scale(12);
    opacity: 0;
    border-width: 0px;
  }
}

@keyframes screenShake {
  0%, 100% { transform: translate(0, 0); }
  25% { transform: translate(-2px, -2px); }
  50% { transform: translate(2px, 2px); }
  75% { transform: translate(-2px, 2px); }
}

@keyframes pop {
  0% { transform: scale(1); }
  15% { transform: scale(2.2) rotate(-15deg); }
  33% { transform: scale(0.6) rotate(15deg); }
  50% { transform: scale(1.8) rotate(-10deg); }
  66% { transform: scale(0.9) rotate(10deg); }
  85% { transform: scale(1.1) rotate(-5deg); }
  100% { transform: scale(1) rotate(0deg); }
}

.animate-scattering-burst {
  animation: scatteringBurst 0.8s .6s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

.animate-ring-flare {
  animation: ringFlare 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

.animate-ring-flare-secondary {
  animation: ringFlareSecondary 1s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

.animate-screen-shake {
  animation: screenShake 0.2s .6s cubic-bezier(0.36, 0.07, 0.19, 0.97) both;
}

.animate-pop {
  animation: pop 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}